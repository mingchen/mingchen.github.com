
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Ming's Blog</title>
  <meta name="author" content="Ming">

  
  <meta name="description" content="APK文件格式 APK实质上是一个压缩文件(基于Java的jar包格式）。
它的MIME类型为：application/vnd.android.package-archive。 你可以直接使用 unzip 命令进行解压缩并查看里面的内容。
解压缩一个标准的APK文件包含如下内容： META-INF &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.chenming.info/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Ming's Blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-33056683-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Ming's Blog</a></h1>
  
    <h2>trivial notes</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.chenming.info" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/blog/categories">Categories</a></li>
  <li><a href="/blog/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/02/android-hack-tools/">Android APK解析及反编译</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-05-02T15:22:00+08:00" pubdate data-updated="true">May 2<span>nd</span>, 2013</time>
        
         | <a href="/blog/2013/05/02/android-hack-tools/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>APK文件格式</h2>

<p>APK实质上是一个压缩文件(基于Java的jar包格式）。
它的MIME类型为：<code>application/vnd.android.package-archive</code>。</p>

<p>你可以直接使用 <code>unzip</code> 命令进行解压缩并查看里面的内容。
解压缩一个标准的APK文件包含如下内容：</p>

<ul>
<li>META-INF directory:

<ul>
<li>MANIFEST.MF: the Manifest file</li>
<li>CERT.RSA: The certificate of the application.</li>
<li>CERT.SF: The list of resources and SHA-1 digest;</li>
</ul>
</li>
<li>lib: the directory containing the compiled code that is specific
to a software layer of a processor, the folder is split into more folders within it:

<ul>
<li>armeabi: compiled code for all ARM based processors only</li>
<li>armeabi-v7a: compiled code for all ARMv7 and above based processors only</li>
<li>x86: compiled code for x86 processors only</li>
<li>mips: compiled code for MIPS processors only</li>
</ul>
</li>
<li>res: the directory containing resources not compiled into resources.arsc (see below).</li>
<li>assets: a directory containing applications assets,
which can be retrieved by AssetManager.</li>
<li>AndroidManifest.xml: An additional Android manifest file, describing the name,
version, access rights, referenced library files for the application.
This file may be in Android binary XML that can be converted into human-readable
plaintext XML with tools such as AXMLPrinter2, apktool, or Androguard.</li>
<li>classes.dex: The classes compiled in the dex file format understandable
by the Dalvik virtual machine</li>
<li>resources.arsc : a file containing pre-compiled resources,
such as binary XML for example.</li>
</ul>


<p>使用 <code>unzip</code> 加压缩后的内容是不可读的：</p>

<ul>
<li>AndroidManifest.xml 是二进制格式的，无法直接阅读。</li>
<li>资源文件（比如layout，string等）也是二进制格式</li>
<li>可执行代码是 .dex格式，也无法直接读取。</li>
</ul>


<h2>反编译APK</h2>

<h3>android-apktool</h3>

<p>为了能顺利的阅读这些进过编码的文件，需要对APK进行反编译， <a href="https://code.google.com/p/android-apktool">android-apktool</a> 就是专门用来干这个事的。</p>

<blockquote><p>It is a tool for reverse engineering 3rd party, closed, binary Android apps. It can decode resources to nearly original form and rebuild them after making some modifications; it makes possible to debug smali code step by step. Also it makes working with app easier because of project-like files structure and automation of some repetitive tasks like building apk, etc.</p></blockquote>

<p>下载后解压缩后能得到 <code>apktool.jar</code>，<code>apktool</code> 和 <code>aapt</code> 三个程序。
其中 <code>apktool</code> 是 <code>apktool.jar</code> 的封装。使用的时候使用 <code>apktool</code> 即可。</p>

<p><code>apktool</code> 能对 <code>apk</code> 文件进行反编译，包括反编译 <code>AndroidManifest.xml</code> 和资源文件。
它会dex文件反编译成 <code>smali</code> 的格式，类似java的字节码。</p>

<pre><code>$ apktool
Apktool v1.5.2 - a tool for reengineering Android apk files
Copyright 2010 Ryszard Wi?niewski &lt;brut.alll@gmail.com&gt;
with smali v1.4.1, and baksmali v1.4.1
Updated by @iBotPeaches &lt;connor.tumbleson@gmail.com&gt;
Apache License 2.0 (http://www.apache.org/licenses/LICENSE-2.0)

Usage: apktool [-q|--quiet OR -v|--verbose] COMMAND [...]

COMMANDs are:

    d[ecode] [OPTS] &lt;file.apk&gt; [&lt;dir&gt;]
        Decode &lt;file.apk&gt; to &lt;dir&gt;.

        OPTS:

        -s, --no-src
            Do not decode sources.
        -r, --no-res
            Do not decode resources.
        -d, --debug
            Decode in debug mode. Check project page for more info.
        -b, --no-debug-info
            Baksmali -- don't write out debug info (.local, .param, .line, etc.)
        -f, --force
            Force delete destination directory.
        -t &lt;tag&gt;, --frame-tag &lt;tag&gt;
            Try to use framework files tagged by &lt;tag&gt;.
        --frame-path &lt;dir&gt;
            Use the specified directory for framework files
        --keep-broken-res
            Use if there was an error and some resources were dropped, e.g.:
            "Invalid config flags detected. Dropping resources", but you
            want to decode them anyway, even with errors. You will have to
            fix them manually before building.

    b[uild] [OPTS] [&lt;app_path&gt;] [&lt;out_file&gt;]
        Build an apk from already decoded application located in &lt;app_path&gt;.

        It will automatically detect, whether files was changed and perform
        needed steps only.

        If you omit &lt;app_path&gt; then current directory will be used.
        If you omit &lt;out_file&gt; then &lt;app_path&gt;/dist/&lt;name_of_original.apk&gt;
        will be used.

        OPTS:

        -f, --force-all
            Skip changes detection and build all files.
        -d, --debug
            Build in debug mode. Check project page for more info.
        -a, --aapt
            Loads aapt from specified location.

    if|install-framework &lt;framework.apk&gt; [&lt;tag&gt;] --frame-path [&lt;location&gt;]
        Install framework file to your system.

For additional info, see: http://code.google.com/p/android-apktool/
For smali/baksmali info, see: http://code.google.com/p/smali/
</code></pre>

<p>要反编译一个apk文件，可以执行如下命令:</p>

<pre><code>$ apktool d foo.apk
</code></pre>

<p>它会生成一个 foo 的目录来存放反编译的结果。</p>

<h3>dextojar + jd-gui</h3>

<p>另外一个反编译的工具是 <a href="">dextojar</a>，它能把 <code>.dex</code> 文件反编译成 <code>.jar</code> 文件。</p>

<p><code>dex2jar</code> 包含4个工具：</p>

<ul>
<li><em>dex-reader</em> is designed to read the Dalvik Executable (.dex/.odex) format. It has a light weight API similar with ASM.</li>
<li><em>dex-translator</em> is designed to do the convert job. It reads the dex instruction to * dex-ir format, after some optimize, convert to ASM format.</li>
<li><em>dex-ir</em> used by dex-translator, is designed to represent the dex instruction</li>
<li><em>dex-tools</em> tools to work with .class files. here are examples:
<strong> Modify a apk
</strong> DeObfuscate a jar</li>
</ul>


<p><code>dex2jar</code> 的用法也很简单：</p>

<pre><code>$ d2j-dex2jar.sh classes.dex
dex2jar classes.dex -&gt; classes-dex2jar.jar
</code></pre>

<p>反编译之后获得 <code>.jar</code> 文件，这个时候就可以使用java的反编译工具如<a href="http://java.decompiler.free.fr/?q=jdgui">jd-gui</a>来查看java代码了。</p>

<h2>参考</h2>

<ul>
<li><a href="http://en.wikipedia.org/wiki/APK_(file_format)">APK (file format)</a></li>
<li><a href="https://code.google.com/p/android-apktool">android-apktool</a></li>
<li><a href="http://java.decompiler.free.fr/?q=jdgui">jd-gui</a></li>
<li><a href="https://code.google.com/p/dex2jar/">dex2jar</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/02/using-sphinx-to-generate-chinese-pdf/">在Mac上使用Sphinx产生文档并生成中文PDF文档</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-02T07:22:00+08:00" pubdate data-updated="true">Mar 2<span>nd</span>, 2013</time>
        
         | <a href="/blog/2013/03/02/using-sphinx-to-generate-chinese-pdf/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>什么是sphinx ?</p>

<blockquote><p>Sphinx is a tool that makes it easy to create intelligent and beautiful documentation, written by Georg Brandl and licensed under the BSD license.</p>

<p>It was originally created for the new Python documentation, and it has excellent facilities for the documentation of Python projects, but C/C++ is already supported as well, and it is planned to add special support for other languages as well.</p></blockquote>

<p>安装Sphinx</p>

<pre><code>pip install sphinx
</code></pre>

<p>使用Sphinx创建文档工程</p>

<pre><code>mkdir docs
sphinx-quickstart
</code></pre>

<p><code>sphinx-quickstart</code>会问你一连串的问题，完成之后会创建基本的文档工程文件。其中配置文件为<code>conf.py</code>。</p>

<p>Sphinx支持输出html和pdf文档。输出html很简单：</p>

<pre><code>make html
</code></pre>

<p>它会把生成的html文档存放在<code>_build/html</code>目录下。</p>

<p>要生成pdf的话，需要先安装Latex，推荐使用<a href="http://www.tug.org/mactex/">MacTex</a>，它的安装包约有2GB，安装需要4GB的空间。</p>

<p>如果文档是纯英文文档，要生成pdf很简单，只需要执行下面的命令即可：</p>

<pre><code>make latexpdf
</code></pre>

<p>它会把生成的html文档存放在<code>_build/pdf</code>目录下。</p>

<p>如果在文档中有中文，使用这种方法产生pdf的话<code>pdflatex</code>会提示错误。</p>

<p>要解决这个问题，需要修改<code>conf.py</code>中的latex配置，在生成的latex文件中添加对中文的支持。
在<code>conf.py</code>中找到<code>latex_elements</code>并修改为如下：</p>

<pre><code>latex_elements = {
# The paper size ('letterpaper' or 'a4paper').
'papersize': 'a4paper',

# The font size ('10pt', '11pt' or '12pt').
'pointsize': '12pt',

'label': '\\usepackage[english]{babel}',

# Additional stuff for the LaTeX preamble.
'preamble': '''
\usepackage{xeCJK}
\usepackage{indentfirst}
\setlength{\parindent}{2em}
\setCJKmainfont[BoldFont=SimHei, ItalicFont=STKaiti]{SimSun}
\setCJKmonofont[Scale=0.9]{STKaiti}
\setCJKfamilyfont{song}[BoldFont=SimSun]{SimSun}
\setCJKfamilyfont{sf}[BoldFont=SimSun]{SimSun}
\XeTeXlinebreaklocale "zh"
\XeTeXlinebreakskip = 0pt plus 1pt
'''
}
</code></pre>

<p>其中字体的设置是需要根据你系统中可用的中文字体来确定，
可以使用<code>fc-list</code>命令来查看系统支持的中文字体：</p>

<pre><code>fc-list :lang=zh
</code></pre>

<p>在获取到系统支持的中文字体后，选择喜欢的字体即可。</p>

<p>要在latex中支持中文，需要使用<code>xelatex</code>命令来产生pdf文档。</p>

<pre><code>make latex
cd _build/latex
xelatex *.tex
</code></pre>

<h2>参考</h2>

<ul>
<li><a href="http://sphinx-doc.org/tutorial.html">http://sphinx-doc.org/tutorial.html</a></li>
<li><a href="http://sphinx-doc.org/rest.html">http://sphinx-doc.org/rest.html</a></li>
<li><a href="http://people.ee.ethz.ch/~creller/web/tricks/reST.html">http://people.ee.ethz.ch/~creller/web/tricks/reST.html</a></li>
<li><a href="http://kkdevs.tumblr.com/post/38275843739/sphinx-latex-pdf">http://kkdevs.tumblr.com/post/38275843739/sphinx-latex-pdf</a></li>
<li><a href="http://www.tug.org/mactex/">http://www.tug.org/mactex/</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/01/04/android-library-jar/">Android的Library工程</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-01-04T15:02:00+08:00" pubdate data-updated="true">Jan 4<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/01/04/android-library-jar/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>为什么要使用Android的Library工程？</h2>

<p>简单的说就是减少代码拷贝。</p>

<blockquote><p>An Android library project is a development project that holds shared Android source code and resources. Other Android application projects can reference the library project and, at build time, include its compiled sources in their .apk files. Multiple application projects can reference the same library project and any single application project can reference multiple library projects.</p></blockquote>

<h2>Android Library工程开发中需要考虑的问题</h2>

<h3>能把Android的Library工程打成一个单独的jar包发布吗？</h3>

<p>如果工程是纯粹的Java文件，那么这和一个普通的java library工程没有区别，
可以打成jar包来发布。
在<code>custom_rules.xml</code>里添加如下两个target即可使用<code>ant</code>来编译jar包了：</p>

<pre><code>&lt;target name="jar" depends="-compile" description="Build binary jar"&gt;
    &lt;jar destfile="${ant.project.name}.jar" basedir="${out.classes.absolute.dir}" &gt;
        &lt;include name="com/example/android/**" /&gt;
    &lt;/jar&gt;
&lt;/target&gt;

&lt;target name="src-jar" description="bundle sources in a jar"&gt;
    &lt;jar destfile="${ant.project.name}-src.jar" basedir="src"/&gt;
&lt;/target&gt;
</code></pre>

<p>但是如果Library工程有资源（string, layout等），针对 ADT r21 的答案是不行的。</p>

<blockquote><p>You cannot export a library project to a JAR file.
A library cannot be distributed as a binary file (such as a JAR file). This will be added in a future version of the SDK
Tools.</p></blockquote>

<p>针对Library工程有资源但又不想发布源代码的一种workaround的方法是把src目录进行编译后成jar包，然后发布的时候发布资源和jar包。在主工程中把Library工程的jar包放在libs目录下即可正常编译。
当然如果工程文件的<code>AndroidManifest.xml</code>里的内容需要合并到主工程的<code>AndroidManifest.xml</code>里。
合并<code>AndroidManifest.xml</code>的需求已经在Android Tools的<a href="http://tools.android.com/roadmap">Roadmap</a>里，但何时能实现还未知。</p>

<h3>资源冲突</h3>

<p>如果在Library的<code>strings.xml</code>和主工程的<code>strings.xml</code>都定义了<code>hello_world</code>，
那么编译后的apk会优先使用主工程的<code>hello_world</code>。
为了避免冲突，建议在Library的工程中对所有资源添加前缀。</p>

<blockquote><p>Since the tools merge the resources of a library project with those of a dependent application project, a given resource ID might be defined in both projects. In this case, the tools select the resource from the application, or the library with highest priority, and discard the other resource. As you develop your applications, be aware that common resource IDs are likely to be defined in more than one project and will be merged, with the resource from the application or highest-priority library taking precedence.
To avoid resource conflicts for common resource IDs, consider using a prefix or other consistent naming scheme that is unique to the project (or is unique across all projects).</p></blockquote>

<h3>Library工程文件不能包含assets</h3>

<p>Library工程不能在assets目录下存放raw资源，必须存放在主工程的assets目录下。</p>

<p>但是支持使用res目录来存放资源。</p>

<h3>每个Library工程都有自己的R文件</h3>

<p>每个Library工程在编译后都会在gen目录生成自己的R.java文件。</p>

<h3>为Library工程创建测试工程</h3>

<p>要的测试工程本身可以直接引用Library工程，测试工程本身也是APK。</p>

<p>通常的做法是在Library工程下创建一个tests目录用来存放测试工程。</p>

<p>需要在测试工程的<code>AndroidManifest.xml</code>的<code>&lt;application&gt;</code>中加入让它成为一个测试工程。</p>

<pre><code>&lt;uses-library android:name="android.test.runner" /&gt;
</code></pre>

<p>同时在<code>project.properties</code>中加入对Library工程的引用：</p>

<pre><code># Project target.
target=android-8
android.library.reference.1=.. 
</code></pre>

<h2>参考:</h2>

<ul>
<li><a href="http://developer.android.com/tools/projects/index.html#LibraryProjects">Android SDK document - library project</a></li>
<li><a href="http://tools.android.com/recent/buildchangesinrevision14">Build changes in revision 14</a></li>
<li><a href="http://android-developers.blogspot.com/2011/10/changes-to-library-projects-in-android.html">Changes to Library Projects in Android SDK Tools, r14</a></li>
<li><a href="http://tools.android.com/roadmap">Android Tools Roadmap</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/12/12/centos-tips/">CentOS Tips</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-12T07:22:00+08:00" pubdate data-updated="true">Dec 12<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/12/12/centos-tips/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>小工具软件</h2>

<h3>安全删除文件 - wipe</h3>

<p>要想安全的删除一个文件，可以使用wipe。</p>

<pre><code>yum install wipe
</code></pre>

<p>用法</p>

<pre><code>wipe foo.txt        # wipe a file
wipe -q foo.txt     # use quick mode to wipe a file
wipe -fr yourdir    # wipe a directory
</code></pre>

<h3>加密解密 - truecrypt</h3>

<p>truecrypt依赖fuse-libs，需要先安装：</p>

<pre><code>yum install fuse-libs fuse
</code></pre>

<p>另外truecrypt需要用户能有sudo的权限，首先检查 /etc/sudoers 里wheel组的用户有sudo的权限，然后需要把用户加入 wheel 组，用root身份执行下面的命令</p>

<pre><code># usermod -G wheel &lt;username&gt;
</code></pre>

<p>truecrypt的用法示例。</p>

<p>创建一个加密卷：</p>

<pre><code>truecrypt -t -c
</code></pre>

<p>挂载一个加密卷：</p>

<pre><code>truecrypt sandbox.tc sandbox
</code></pre>

<p>卸载一个加密卷：</p>

<pre><code>truecrypt -d sandbox.tc
</code></pre>

<h2>参考</h2>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/09/18/android-hardware-accel/">Android的硬件加速及可能导致的问题</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-09-18T14:39:00+08:00" pubdate data-updated="true">Sep 18<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/09/18/android-hardware-accel/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>问题</h2>

<p>在Android 4.0的某些设备上，在<code>View</code>刷新时会出现花屏和屏幕上的某些View错位的现象。
经过调查后发现<code>adb logcat</code>中出现很多<code>OpenGLRenderer: 0x501</code>的错位：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>09-18 14:34:39.090: DEBUG/OpenGLRenderer(3104): GL error from OpenGLRenderer: 0x501
</span><span class='line'>09-18 14:34:39.386: DEBUG/OpenGLRenderer(3104): GL error from OpenGLRenderer: 0x501
</span><span class='line'>09-18 14:34:39.656: DEBUG/OpenGLRenderer(3104): GL error from OpenGLRenderer: 0x501</span></code></pre></td></tr></table></div></figure>


<p>从这个日志，初步怀疑是硬件加速导致的问题。
经过分析发现使用了比较复杂的自定义<code>View</code>，可能会导致硬件加速渲染出错。</p>

<h2>硬件加速的优点与缺点</h2>

<p>硬件加速能使用GPU来加速2D图像的渲染速度，但是硬件加速并不能完全支持所有的渲染操作，
针对自定义的View，硬件加速可能导致渲染出现错误。
如果有自定义的View，需要在硬件加速的设备上进行测试，如果出现渲染的问题，需要关闭硬件加速。</p>

<h2>开启和关闭硬件加速</h2>

<p>对硬件加速的开关可以在不同的级别进行控制：</p>

<ul>
<li>Application</li>
<li>Activity</li>
<li>Windows</li>
<li>View</li>
</ul>


<h3>Application级别</h3>

<p>在Applciation级别控制硬件加速的开关：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;application android:hardwareAccelerated="true" ...></span></code></pre></td></tr></table></div></figure>


<h3>Activity级别</h3>

<p>可以对单个的<code>Activity</code>控制是否启用硬件加速：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;application android:hardwareAccelerated="true">
</span><span class='line'>    &lt;activity ... />
</span><span class='line'>    &lt;activity android:hardwareAccelerated="false" />
</span><span class='line'>&lt;/application></span></code></pre></td></tr></table></div></figure>


<h3>Window级别</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>getWindow().setFlags(
</span><span class='line'>    WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED,
</span><span class='line'>    WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED);</span></code></pre></td></tr></table></div></figure>


<h3>View级别</h3>

<p>在指定的View上关闭硬件加速：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>myView.setLayerType(View.LAYER_TYPE_SOFTWARE, null);</span></code></pre></td></tr></table></div></figure>


<p>或者使用<code>android:layerType="software"</code>来关闭硬件加速：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
</span><span class='line'>    android:layout_width="fill_parent"
</span><span class='line'>    android:layout_height="fill_parent"
</span><span class='line'>    android:orientation="vertical"
</span><span class='line'>    android:paddingLeft="2dp"
</span><span class='line'>    android:layerType="software"
</span><span class='line'>    android:paddingRight="2dp" ></span></code></pre></td></tr></table></div></figure>


<h2>如何判断一个View是否启用了硬件加速</h2>

<ul>
<li><code>View.isHardwareAccelerated()</code> returns true if the View is attached to a hardware accelerated window.</li>
<li><code>Canvas.isHardwareAccelerated()</code> returns true if the Canvas is hardware accelerated</li>
</ul>


<h2>Android Drawing Models</h2>

<p>When hardware acceleration is enabled, the Android framework utilizes a new drawing model that utilizes display lists to
render your application to the screen. To fully understand display lists and how they might affect your application, it
is useful to understand how Android draws views without hardware acceleration as well. The following sections describe
the software-based and hardware-accelerated drawing models.</p>

<h3>Software-based drawing model</h3>

<p>In the software drawing model, views are drawn with the following two steps:</p>

<ol>
<li>Invalidate the hierarchy</li>
<li>Draw the hierarchy</li>
</ol>


<p>Whenever an application needs to update a part of its UI, it invokes invalidate() (or one of its variants) on any view
that has changed content. The invalidation messages are propagated all the way up the view hierarchy to compute the
regions of the screen that need to be redrawn (the dirty region). The Android system then draws any view in the
hierarchy that intersects with the dirty region. Unfortunately, there are two drawbacks to this drawing model:</p>

<ul>
<li>First, this model requires execution of a lot of code on every draw pass. For example, if your application calls
invalidate() on a button and that button sits on top of another view, the Android system redraws the view even though it
hasn&#8217;t changed.</li>
<li>The second issue is that the drawing model can hide bugs in your application. Since the Android system redraws views
when they intersect the dirty region, a view whose content you changed might be redrawn even though invalidate() was not
called on it. When this happens, you are relying on another view being invalidated to obtain the proper behavior. This
behavior can change every time you modify your application. Because of this, you should always call invalidate() on your
custom views whenever you modify data or state that affects the view’s drawing code.</li>
</ul>


<p>Note: Android views automatically call invalidate() when their properties change, such as the background color or the
text in a TextView.</p>

<h3>Hardware accelerated drawing model</h3>

<p>The Android system still uses invalidate() and draw() to request screen updates and to render views, but handles the
actual drawing differently. Instead of executing the drawing commands immediately, the Android system records them
inside display lists, which contain the output of the view hierarchy’s drawing code. Another optimization is that the
Android system only needs to record and update display lists for views marked dirty by an invalidate() call. Views that
have not been invalidated can be redrawn simply by re-issuing the previously recorded display list. The new drawing
model contains three stages:</p>

<ol>
<li>Invalidate the hierarchy</li>
<li>Record and update display lists</li>
<li>Draw the display lists</li>
</ol>


<p>With this model, you cannot rely on a view intersecting the dirty region to have its draw() method executed. To ensure
that the Android system records a view’s display list, you must call invalidate(). Forgetting to do so causes a view to
look the same even after changing it, which is an easier bug to find if it happens.</p>

<p>Using display lists also benefits animation performance because setting specific properties, such as alpha or rotation,
does not require invalidating the targeted view (it is done automatically). This optimization also applies to views with
display lists (any view when your application is hardware accelerated.) For example, assume there is a LinearLayout that
contains a ListView above a Button. The display list for the LinearLayout looks like this:</p>

<ul>
<li>DrawDisplayList(ListView)</li>
<li>DrawDisplayList(Button)</li>
</ul>


<p>Assume now that you want to change the ListView&#8217;s opacity. After invoking setAlpha(0.5f) on the ListView, the display
list now contains this:</p>

<ul>
<li>SaveLayerAlpha(0.5)</li>
<li>DrawDisplayList(ListView)</li>
<li>Restore</li>
<li>DrawDisplayList(Button)</li>
</ul>


<p>The complex drawing code of ListView was not executed. Instead, the system only updated the display list of the much
simpler LinearLayout. In an application without hardware acceleration enabled, the drawing code of both the list and its
parent are executed again.</p>

<h2>参考</h2>

<ul>
<li><a href="http://developer.android.com/guide/topics/graphics/hardware-accel.html">http://developer.android.com/guide/topics/graphics/hardware-accel.html</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/08/25/python-tips/">Python Tips</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-08-25T15:13:00+08:00" pubdate data-updated="true">Aug 25<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/08/25/python-tips/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Python</h2>

<h3>list常用操作</h3>

<p>合并两个<code>list</code>并排序</p>

<pre><code>&gt;&gt;&gt; l1 = [1, 3, 4, 7]
&gt;&gt;&gt; l2 = [0, 2, 5, 6, 8, 9]
&gt;&gt;&gt; l1.extend(l2)
&gt;&gt;&gt; sorted(l1)
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
</code></pre>

<h3>看一个对象是否有特定的属性</h3>

<p>使用<code>hasattr</code>可以检查一个对象是否有指定的属性：</p>

<pre><code>if hasattr(foo,'attr1'):
    print foo.attr1
</code></pre>

<h2>Django</h2>

<h2>参考</h2>

<ul>
<li><a href="http://stackoverflow.com/questions/464342/combining-two-sorted-lists-in-python">http://stackoverflow.com/questions/464342/combining-two-sorted-lists-in-python</a></li>
<li><a href="http://stackoverflow.com/questions/610883/how-to-know-if-an-object-has-an-attribute-in-python">http://stackoverflow.com/questions/610883/how-to-know-if-an-object-has-an-attribute-in-python</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/08/21/protobuf-ios/">在iOS上使用protobuf</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-08-21T17:57:00+08:00" pubdate data-updated="true">Aug 21<span>st</span>, 2012</time>
        
         | <a href="/blog/2012/08/21/protobuf-ios/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>由于现有的iOS的protobuf库不支持delimited写和读到stream中，
在Java已经由下面的API实现了类似的支持：</p>

<ul>
<li>writeDelimitedTo</li>
<li>parseDelimitedFrom</li>
</ul>


<p>为了要iOS的支持类似功能，我在 https://github.com/booyah/protobuf-objc
和 http://code.google.com/p/metasyntactic/wiki/ProtocolBuffers
的基础上进行类似的实现。</p>

<p>代码和文档在这儿：</p>

<p>https://github.com/mingchen/protobuf-ios</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/07/15/learn-octave/">学习一点octave</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-07-15T17:51:00+08:00" pubdate data-updated="true">Jul 15<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/07/15/learn-octave/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>入门</h2>

<p>不像<code>matlab</code>有图形界面，<code>octave</code>只提供了命令行接口。
要启动<code>octave</code>，只需要在命令行输入<code>octave</code>即可。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ octave
</span><span class='line'>GNU Octave, version 3.6.1
</span><span class='line'>Copyright (C) 2012 John W. Eaton and others.
</span><span class='line'>This is free software; see the source code for copying conditions.
</span><span class='line'>There is ABSOLUTELY NO WARRANTY; not even for MERCHANTABILITY or
</span><span class='line'>FITNESS FOR A PARTICULAR PURPOSE.  For details, type `warranty'.
</span><span class='line'>
</span><span class='line'>Octave was configured for "x86_64-apple-darwin11.4.0".
</span><span class='line'>
</span><span class='line'>Additional information about Octave is available at http://www.octave.org.
</span><span class='line'>
</span><span class='line'>Please contribute if you find this software useful.
</span><span class='line'>For more information, visit http://www.octave.org/help-wanted.html
</span><span class='line'>
</span><span class='line'>Read http://www.octave.org/bugs.html to learn how to submit bug reports.
</span><span class='line'>
</span><span class='line'>For information about changes from previous versions, type `news'.
</span><span class='line'>
</span><span class='line'>octave:1></span></code></pre></td></tr></table></div></figure>


<p>接下来我们就可以向<code>octave</code>发出指令了，比如进行简单的数学运算：</p>

<pre><code>octave:2&gt; 2 * (3 + 5)
ans =  16

octave:3&gt; 2 ^ (3 + 5)
ans =  256
</code></pre>

<h3>变量</h3>

<p>默认情况运算的结果会保存在ans这个变量中，在octave里还能使用变量，
比如创建一个变量x用于保存一次运算的结果：</p>

<pre><code>octave:7&gt; x = 2 * 3
x =  6
</code></pre>

<p>如果想查看当前有哪些变量在使用，使用<code>who</code>命令：</p>

<pre><code>octave:8&gt; who
Variables in the current scope:

ans  x
</code></pre>

<p>要查看某个变量的值，可以使用<code>disp</code>，比如要查看刚刚创建的变量x的值：</p>

<pre><code>octave:9&gt; disp(x)
 6
</code></pre>

<h3>常量</h3>

<p><code>octave</code>系统定义了圆周率<code>pi</code>和自然指数<code>e</code>这两个常量，</p>

<pre><code>octave:2&gt; pi
ans =  3.1416
octave:3&gt; e
ans =  2.7183
</code></pre>

<p>另外系统还定义了<code>Inf</code>和<code>NaN</code>（注意要区分大小写）。
<code>Inf</code>(Infinity)表示被零除的结果，<code>NaN</code>(Not a Number)表示零除零的结果。</p>

<pre><code>octave:23&gt; 3/0
warning: division by zero
ans = Inf
octave:24&gt; 0/0
warning: division by zero
ans = NaN
</code></pre>

<h3>定义显示结果方式</h3>

<p>使用<code>format</code>命令可以定义输出结果以什么格式显示，
比如<code>hex</code>指定为十六进制，<code>bit</code>指定为八进制，<code>long</code>能以更高的精度来显示。
使用<code>help format</code>来查看<code>format</code>的详细参数。</p>

<p>示例:</p>

<pre><code>octave:4&gt; format long
octave:5&gt; pi
ans =  3.14159265358979
</code></pre>

<h3>工作区</h3>

<p>使用<code>save</code>命令保存当前工作区到文件work1.mat：</p>

<pre><code>octave:6&gt; save work1
</code></pre>

<p>它会保存所有的变量信息。
使用<code>load</code>命令在下次启动的时候载入之前的工作区：</p>

<pre><code>octave:1&gt; load work1
</code></pre>

<h3>分号</h3>

<p>默认情况下<code>octave</code>会显示每次计算的结果到屏幕上。
如果你不想要看到这些结果，可以在语句的结尾加上分号来抑制计算结果的输出。
在写脚本时使用分号很有用。</p>

<pre><code>octave:32&gt; x = 2 * 3
x =  6
octave:33&gt; x = 2 * 3;
octave:34&gt; disp(x)
 6
</code></pre>

<h3>获取帮助</h3>

<p><code>octave</code>本身提供了帮助功能，键入<code>help</code>即会看到<code>octave</code>的帮助信息。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>octave:1> help
</span><span class='line'>
</span><span class='line'>  For help with individual commands and functions type
</span><span class='line'>
</span><span class='line'>    help NAME
</span><span class='line'>
</span><span class='line'>  (replace NAME with the name of the command or function you would
</span><span class='line'>  like to learn more about).
</span><span class='line'>
</span><span class='line'>  For a more detailed introduction to GNU Octave, please consult the
</span><span class='line'>  manual.  To read the manual from the prompt type
</span><span class='line'>
</span><span class='line'>    doc
</span><span class='line'>
</span><span class='line'>  GNU Octave is supported and developed by its user community.
</span><span class='line'>  For more information visit http://www.octave.org.</span></code></pre></td></tr></table></div></figure>


<p>如果想查看某个函数的帮助信息，使用<code>help fun-name</code>即可。
比如想查看<code>trace</code>（矩阵的迹）这个函数的帮助信息，执行<code>help trace</code>会看到如下信息：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>octave:2> help trace
</span><span class='line'>`trace' is a function from the file /usr/local/Cellar/octave/3.6.1/share/octave/3.6.1/m/linear-algebra/trace.m
</span><span class='line'>
</span><span class='line'> -- Function File:  trace (A)
</span><span class='line'>     Compute the trace of A, `sum (diag (A))'.
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>Additional help for built-in functions and operators is
</span><span class='line'>available in the on-line version of the manual.  Use the command
</span><span class='line'>`doc &lt;topic>' to search the manual index.
</span><span class='line'>
</span><span class='line'>Help and information about Octave is also available on the WWW
</span><span class='line'>at http://www.octave.org and via the help@octave.org
</span><span class='line'>mailing list.</span></code></pre></td></tr></table></div></figure>


<h2>矩阵</h2>

<h3>创建矩阵</h3>

<p>矩阵使用<code>方括号</code>(<code>[]</code>)括起来，维度使用<code>分号</code>(<code>;</code>)分割。
同一维度之间的分隔符可以是<code>空格</code>或<code>逗号</code>(<code>,</code>)。
示例：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>octave:35> x = [ 2 3 5 ]
</span><span class='line'>x =
</span><span class='line'>
</span><span class='line'>   2   3   5
</span><span class='line'>
</span><span class='line'>octave:36> y = [ 2, 3, 5 ]
</span><span class='line'>y =
</span><span class='line'>
</span><span class='line'>   2   3   5
</span><span class='line'>
</span><span class='line'>octave:37> z = [ 2; 3; 5 ]
</span><span class='line'>z =
</span><span class='line'>
</span><span class='line'>   2
</span><span class='line'>   3
</span><span class='line'>   5
</span><span class='line'>
</span><span class='line'>octave:39> a = [ 1 2; 1, 3; 1   5 ]
</span><span class='line'>a =
</span><span class='line'>
</span><span class='line'>   1   2
</span><span class='line'>   1   3
</span><span class='line'>   1   5</span></code></pre></td></tr></table></div></figure>


<h3>使用冒号表达式快速构造连续的向量</h3>

<p>在<code>octave</code>中可以使用冒号表达式来快速的构造连续的向量，比如：</p>

<pre><code>octave:43&gt; v = 2:5
v =

   2   3   4   5
</code></pre>

<p>这种方式构造的向量是以1为递增的。
如果想指定步长，可以使用<code>start:step:end</code>的方式，其中<code>step</code>即为步长。
这样构造出来的向量的最后一个数值不会超过<code>end</code>。
比如：</p>

<pre><code>octave:44&gt; v = 2:0.3:3
v =

    2.0000    2.3000    2.6000    2.9000
</code></pre>

<h3>构造矩阵的函数</h3>

<p><code>linspace(start, end, N)</code>产生<code>N</code>个均匀分布于<code>start</code>和<code>end</code>之间的向量。
在绘图时用于产生<code>x</code>坐标特别有用。</p>

<p><code>logspace(start, end, N)</code>产生<code>N</code>个指数分布于<code>10^start</code>和<code>10^end</code>之间的向量。
在绘图时用于产生<code>x</code>坐标特别有用。</p>

<p><code>zeros(M, N)</code>产生一个M行 x N列的值全为0的矩阵。</p>

<p><code>zeros(N) = zeros(N, N)</code>。</p>

<p><code>ones(M, N)</code>产生一个M行 x N列的值全为1的矩阵。</p>

<p><code>ones(N) = ones(N, N)</code>。</p>

<p><code>rand(M, N)</code>产生一个M行 x N列的值位于0~1的随机数的矩阵。</p>

<p><code>rand(N) = rand(N, N)</code>。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>octave:66> x = linspace (3, 4, 5)
</span><span class='line'>x =
</span><span class='line'>
</span><span class='line'> Columns 1 through 4:
</span><span class='line'>
</span><span class='line'>   3.00000000000000   3.25000000000000   3.50000000000000   3.75000000000000
</span><span class='line'>
</span><span class='line'> Column 5:
</span><span class='line'>
</span><span class='line'>   4.00000000000000
</span><span class='line'>
</span><span class='line'>octave:67> logspace (1, 2, 6)
</span><span class='line'>ans =
</span><span class='line'>
</span><span class='line'> Columns 1 through 4:
</span><span class='line'>
</span><span class='line'>    10.0000000000000    15.8489319246111    25.1188643150958    39.8107170553497
</span><span class='line'>
</span><span class='line'> Columns 5 and 6:
</span><span class='line'>
</span><span class='line'>    63.0957344480193   100.0000000000000</span></code></pre></td></tr></table></div></figure>


<h3>矩阵运算</h3>

<h4>加、减、乘、除</h4>

<p><code>octave</code>的矩阵运算很直观：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>A + B
</span><span class='line'>A - B
</span><span class='line'>A * B
</span><span class='line'>A \ B</span></code></pre></td></tr></table></div></figure>


<p>说明：<code>A\B</code>为矩阵左除，用于求解线性方程<code>Wx=b</code>，其中<code>W</code>为一个nxn的矩阵，<code>b</code>为一个n维的列向量。
求解线性方式示例：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>octave:15> W = [1 1 1 1; 1 2 3 4; 3 4 6 2; 2 7 10 5];
</span><span class='line'>octave:16> b = [3; 5; 5; 8];
</span><span class='line'>octave:17> x = W\b
</span><span class='line'>x =
</span><span class='line'>
</span><span class='line'>   1.0000
</span><span class='line'>   3.0000
</span><span class='line'>  -2.0000
</span><span class='line'>   1.0000</span></code></pre></td></tr></table></div></figure>


<h4>转置</h4>

<p>矩阵<code>A</code>的转置为<code>A'</code>：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>octave:9> x = rand(3)
</span><span class='line'>x =
</span><span class='line'>
</span><span class='line'>   0.0052581   0.4446771   0.3970036
</span><span class='line'>   0.7844458   0.3317067   0.9633000
</span><span class='line'>   0.0577080   0.9015905   0.0344771
</span><span class='line'>
</span><span class='line'>octave:10> x'
</span><span class='line'>ans =
</span><span class='line'>
</span><span class='line'>   0.0052581   0.7844458   0.0577080
</span><span class='line'>   0.4446771   0.3317067   0.9015905
</span><span class='line'>   0.3970036   0.9633000   0.034477</span></code></pre></td></tr></table></div></figure>


<h4>幂</h4>

<p>矩阵的幂很容易计算，在<code>octave</code>中 A<sup>3</sup> 可以通过<code>A^3</code>来计算：</p>

<pre><code>octave:18&gt; A = [1 2; 3 4];
octave:19&gt; A^3
ans =

    37    54
    81   118
</code></pre>

<p>如果是对每个元素求幂的话，需要在操作数前加一个点：</p>

<pre><code>octave:20&gt; A.^3
ans =

    1    8
   27   64
</code></pre>

<h4>特征值和特征向量</h4>

<p>如果是求方阵A的特征值，只需要输入<code>eig(A)</code>。
特征向量和特征值可以通过</p>

<pre><code>[X D] = eig(A)
</code></pre>

<p>来求得。</p>

<pre><code>octave:21&gt; eig(A)
ans =

  -0.37228
   5.37228

octave:22&gt; [X D] = eig(A)
X =

  -0.82456  -0.41597
   0.56577  -0.90938

D =

Diagonal Matrix

  -0.37228         0
         0   5.37228
</code></pre>

<p>如果A的要求QR分解，使用下面的命令：</p>

<pre><code>[Q R] = qr(A)
</code></pre>

<p>示例：</p>

<pre><code>octave:23&gt; [Q R] = qr(A)
Q =

   0.31623   0.94868
   0.94868  -0.31623

R =

   3.16228   4.42719
   0.00000   0.63246
</code></pre>

<h2>画图</h2>

<h3>简介</h3>

<p><code>octave</code>使用<code>gunplot</code>的<code>aqua term</code>来实现绘图功能。
因此如果要想正确的绘制出图形，需要先安装<code>gnuplot</code>和<code>aqua term</code>。</p>

<p><code>octave</code>的绘图的命令为<code>plot</code>，具体参考<code>help plot</code>。
<code>octave</code>能在一个图形中画一条曲线或多条曲线，并能为图形添加标题，坐标说明等信息。</p>

<h3>绘制一条曲线</h3>

<p>plot(x, y)</p>

<p>plot(x, y, &#8216;ro&#8217;)</p>

<h3>绘制两条曲线</h3>

<p>octave:1> x = linspace(0, 10, 1000);
octave:2> y = sin(x)./(x+1);
octave:3> z = sin(x);
octave:4> plot(x, y, x, z);</p>

<h3>添加说明</h3>

<p>octave:21> title(&#8216;sinx/x+1&#8217;)
octave:22> xlabel(&#8216;x&#8217;)
octave:23> ylabel(&#8216;y&#8217;)</p>

<p>octave:32>     x = linspace(0, 2*pi, 100);
octave:33> y = sin(x)./(x+1);
octave:34> plot(x, y, &#8216;:&#8217;)
octave:35> hold on
octave:36> z = sin(x);
octave:37> plot(x, z, &#8216;-)
error: unterminated string constant
parse error:</p>

<p>  syntax error</p>

<blockquote><blockquote><blockquote><p>plot(x, z, &#8216;-)</p>

<pre><code>              ^
</code></pre></blockquote></blockquote></blockquote>

<p>octave:37> plot(x, z, &#8216;-&#8216;)
octave:38> legend(&#8216;sin(x)/(x+1)&#8217;, &#8216;sin(x)&#8217;)
octave:39> xlabel(&#8216;angle&#8217;)
octave:40> ylabel(&#8216;value&#8217;)
octave:41> title(&#8216;sin(x)/(x+1) v.s. sin(x)&#8217;)</p>

<h3>添加网格</h3>

<p>使用<code>grid on</code>命令可以为图形添加网格线。</p>

<pre><code>octave:20&gt; grid on
</code></pre>

<p>可以把绘制出来的图形以图片的格式保存，比如：</p>

<p>print(&#8216;sin.eps&#8217;, &#8216;-deps&#8217;)
print(&#8216;/tmp/sin.png&#8217;, &#8216;-dpng&#8217;)</p>

<h2>常见错误信息及解决方法</h2>

<h3>error: for x<sup>A,</sup> A must be a square matrix octave</h3>

<p>这个错误是由于<code>x</code>是一个矩阵，但A不是可以与它进行相乘的矩阵。
一般的情况是<code>x</code>是一个数列，想对这个数列中的每个数进行乘的运算，
如果是这种情况，应该使用<code>x.^A</code>来代替<code>x^A</code>。示例如下：</p>

<pre><code>octave:3&gt; n=1:5; m=2^n; disp(m)
error: for x^A, A must be a square matrix

octave:3&gt; n=1:5; m=2.^n; disp(m)
    2    4    8   16   32
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/07/08/python-pip-virtualenv/">Python的virtualenv和pip</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-07-08T22:53:00+08:00" pubdate data-updated="true">Jul 8<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/07/08/python-pip-virtualenv/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>什么是virtualenv</h2>

<blockquote><p>virtualenv is a tool to create isolated Python environments.</p><p>The basic problem being addressed is one of dependencies and versions, and indirectly permissions. Imagine you have an application that needs version 1 of LibFoo, but another application requires version 2. How can you use both these applications? If you install everything into /usr/lib/python2.7/site-packages (or whatever your platform’s standard location is), it’s easy to end up in a situation where you unintentionally upgrade an application that shouldn’t be upgraded.</p><p>Or more generally, what if you want to install an application and leave it be? If an application works, any change in its libraries or the versions of those libraries can break the application.</p><p>Also, what if you can’t install packages into the global site-packages directory? For instance, on a shared host.</p><p>In all these cases, virtualenv can help you. It creates an environment that has its own installation directories, that doesn’t share libraries with other virtualenv environments (and optionally doesn’t access the globally installed libraries either).</p><footer><strong>What It Does</strong> <cite><a href='http://www.virtualenv.org/en/latest/index.html#id4'>www.virtualenv.org/en/latest/&hellip;</a></cite></footer></blockquote>


<h2>安装virtualenv和pip</h2>

<p>推荐的安装方法是安装<code>virtualenv</code>，它会自动安装<code>pip</code>。
最简单安装<code>virtualenv</code>的方法如下：</p>

<pre><code>$ curl -O https://raw.github.com/pypa/virtualenv/master/virtualenv.py
$ python virtualenv.py my_new_env
$ . my_new_env/bin/activate
(my_new_env)$ pip install ...
</code></pre>

<p>安装<code>pip</code>的前提条件是要安装<a href="http://pypi.python.org/pypi/setuptools">setuptools</a>
或<a href="http://pypi.python.org/pypi/distribute">distribute</a>。
安装<code>distribute</code>的方法：</p>

<pre><code>$ curl http://python-distribute.org/distribute_setup.py | python
</code></pre>

<p><em>警告</em>：如果是<code>Python 3.x</code>，必须安装<code>distribute</code>，因为<code>setuptools</code>不支持<code>Python 3.x</code>。</p>

<p>如果不想安装<code>virtualenv</code>，也可以直接安装<code>pip</code>：</p>

<pre><code>$ curl https://raw.github.com/pypa/pip/master/contrib/get-pip.py | python
</code></pre>

<p>这可能需要<code>root</code>的权限。</p>

<h3>pip用法</h3>

<p><code>pip</code>是个包管理系统，使用它能方便的安装我们想要的包。</p>

<h4>安装</h4>

<p>使用<code>pip</code>的<code>install</code>命令即可安装一个指定的软件包：</p>

<pre><code>$ pip install SomePackage
</code></pre>

<p>如果已经安装了某个软件包，需要升级安装，需要指定<code>--upgrade</code>参数：</p>

<pre><code>$ pip install --upgrade SomePackage
</code></pre>

<p>如果要安装指定的版本的软件包，直接指定软件包版本即可：</p>

<pre><code>$ pip install SomePackage==1.0.4
</code></pre>

<p><code>pip</code>还指定安装包的路径，包括从本地源代码安装或者网上的某个链接安装：</p>

<pre><code>$ pip install ./downloads/SomePackage-1.0.4.tar.gz
$ pip install http://my.package.repo/SomePackage-1.0.4.zip
</code></pre>

<h4>卸载</h4>

<p>要卸载一个软件包，使用<code>uninstall</code>命令即可：</p>

<pre><code>$ pip uninstall package-name
</code></pre>

<h4>查询</h4>

<p>如果不清楚要安装的软件包的具体名称，可以使用<code>search</code>命令进行查询：</p>

<pre><code>$ pip search "query"
</code></pre>

<p>它会列出所有相关的软包。</p>

<h2>参考</h2>

<ul>
<li><a href="http://pypi.python.org/pypi/pip/">http://pypi.python.org/pypi/pip/</a></li>
<li><a href="http://www.virtualenv.org">http://www.virtualenv.org</a></li>
<li><a href="http://www.pip-installer.org/">http://www.pip-installer.org/</a></li>
<li><a href="http://www.pip-installer.org/en/latest/usage.html">http://www.pip-installer.org/en/latest/usage.html</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/07/04/android-sparsearray/">Android上使用SparseArray来替代HashMap</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-07-04T10:50:00+08:00" pubdate data-updated="true">Jul 4<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/07/04/android-sparsearray/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>在android上做lint时，下面的代码会收到警告，提示使用<code>SparseArray</code>来代替<code>HashMap</code>来提高性能。</p>

<pre><code>private static Map&lt;Integer, CommandHandler&gt; mCmdToComponent
    = new HashMap&lt;Integer, CommandHandler&gt;();
</code></pre>

<p>详细信息如下：</p>

<blockquote><p>Use new SparseArray&lt;Object&gt;(&#8230;) instead for better performance</p><p>Issue: Looks for opportunities to replace HashMaps with the more efficient SparseArray<br/>Id: UseSparseArrays</p><p>For maps where the keys are of type integer, it&#8217;s typically more efficient to use the Android SparseArray API. This check identifies scenarios where you might want to consider using SparseArray instead of HashMap for better performance.</p><p>This is *particularly* useful when the value types are primitives like ints, where you can use SparseIntArray and avoid auto-boxing the values from int to Integer.</p><p>If you need to construct a HashMap because you need to call an API outside of your control which requires a Map, you can suppress this warning using for example the @SuppressLint annotation.</p></blockquote>


<p>出于好奇看了看<code>SparseArray</code>的源代码，发现它内部是使用有序数组+二分查找来实现的。
插入、查找和删除操作的效率都是<code>log2(n)</code>。
在插入的时候还要对整个数组进行移动，代价也是不低的。
对<code>HashMap</code>来说，它更省空间和省了<code>auto-boxing</code>的开销。</p>

<p>参考:</p>

<ul>
<li><a href="http://developer.android.com/reference/android/util/SparseArray.html">http://developer.android.com/reference/android/util/SparseArray.html</a></li>
<li><a href="http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/util/SparseArray.java?av=f">SparseArray.java - 源代码</a></li>
<li><a href="http://code.google.com/p/re2/source/browse/util/sparse_array.h">http://code.google.com/p/re2/source/browse/util/sparse_array.h</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/06/29/install-octave-on-mac/">在Mac上安装octave</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-06-29T21:02:00+08:00" pubdate data-updated="true">Jun 29<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/06/29/install-octave-on-mac/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://www.gnu.org/software/octave/">octave</a>
是类似<code>matlab</code>的用于科学计算（比如矩阵的算法）的免费工具。
用<code>matlab</code>写的代码很多都直接能直接在<code>octave</code>下运行。
它能工作在Windows，Linux，MacOS下。</p>

<blockquote><p>GNU Octave is a high-level interpreted language,<br/>primarily intended for numerical computations.<br/>It provides capabilities for the numerical solution<br/>of linear and nonlinear problems, and for performing<br/>other numerical experiments.<br/>It also provides extensive graphics capabilities for<br/>data visualization and manipulation.</p></blockquote>


<p>本以为<code>brew install octave</code>就能安装的，但是发现没有这么简单。
为了在MacOS下能正常使用<code>octave</code>，还颇费一番周折。</p>

<h2>我的环境</h2>

<p>我的OS和编译器版本如下：</p>

<pre><code>Mac OS X 10.7.4
Xcode 4.3.2
</code></pre>

<h2>安装过程</h2>

<h3>安装fortan编译器</h3>

<p>预先需要安装一个gfortan的编译器：</p>

<pre><code>brew install gfortran
</code></pre>

<h3>安装ghostscript</h3>

<p>如果想要把<code>octave</code>绘制的图形保存成图片格式（如<code>png</code>），需要<code>ghostscript</code>的支持。</p>

<pre><code>brew install ghostscript
</code></pre>

<h3>安装fltk</h3>

<p>由于某些组建使用了fltk，而<code>brew</code>里面的<code>fltk</code>版本不对，无法安装。
需要手动安装<code>fltk</code>。从<a href="http://www.fltk.org/">http://www.fltk.org/</a>下载fltk-1.3.0后并解压缩，
然后执行如下命令安装：</p>

<pre><code>./configure --disable-debug --enable-shared --prefix=/usr/local/Cellar/fltk/1.3.0
make install
brew link fltk
</code></pre>

<h3>安装aquaterm</h3>

<p><code>octave</code>依赖<code>gnuplot</code>来绘图，并使用了<code>aqua term</code>。
如果没有<code>aqua term</code>，会导致<code>octave</code>无法画图。
因此需要先安装<code>aquaterm</code>，可以在sourceforge下载安装包。</p>

<h3>安装gnuplot</h3>

<p>然后再安装<code>gnuplot</code>，可以使用<code>brew</code>来安装：</p>

<pre><code>brew install gnuplot
</code></pre>

<p>如果<code>brew</code>安装的<code>gnuplot</code>没有<code>aqua term</code>，可以从源代码安装<code>gnuplot</code>。
方法如下：</p>

<p><a href="http://sourceforge.net/projects/gnuplot/files/gnuplot/4.6.0/">从sourceforge下载gnuplot的源代码</a>，
然后使用下面的命令编译并安装gnuplot</p>

<pre><code>./configure --prefix=/usr/local/Cellar/gnuplot/4.6.0
make &amp;&amp; make install
brew link gnuplot
</code></pre>

<h3>安装octave</h3>

<p>直接使用<code>brew</code>来安装<code>octave</code>：</p>

<pre><code>brew install octave
</code></pre>

<h3>测试安装是否成功</h3>

<p>在安装成功后，在命令行终端输入<code>octave</code>会启动<code>octave</code>，
然后输入如下指令，测试绘图功能是否正常。</p>

<pre><code>x = linspace(0, 2*pi, 100);
y = sin(x);
plot(x, y);
</code></pre>

<p>它会画一个<code>sin(x)</code>的曲线。</p>

<p><img src="/images/install-octave-on-mac/octave-figure-sinx.png" title="sin(x)" alt="picture alt" /></p>

<h2>参考</h2>

<ul>
<li><a href="http://www.gnu.org/software/octave/">Octave主页</a></li>
<li><a href="http://en.wikibooks.org/wiki/Octave_Programming_Tutorial">Octave教程</a></li>
<li><a href="http://www-mdp.eng.cam.ac.uk/web/CD/engapps/octave/octavetut.pdf">Introduction to Octave</a></li>
<li><a href="http://www.octave.org/wiki/index.php?title=Installing_MacOS_X_Bundle">Install Octave on MacOS</a></li>
<li><a href="http://en.wikibooks.org/wiki/MATLAB_Programming/Differences_between_Octave_and_MATLAB">MATLAB Programming/Differences between Octave and MATLAB</a></li>
<li><a href="http://www.gnuplot.info/">Gnuplot主页</a></li>
<li><a href="http://www.ibm.com/developerworks/cn/linux/l-gnuplot/">gnuplot 让您的数据可视化</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/06/25/learn-git/">学习一点git</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-06-25T21:29:00+08:00" pubdate data-updated="true">Jun 25<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/06/25/learn-git/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>git是什么东东？</h2>

<blockquote><p>Git is a fast, scalable, distributed revision control system with an unusually rich command set that provides both high-level operations and full access to internals.</p></blockquote>

<h2>git用法</h2>

<h3>GUI</h3>

<p><code>git</code>自带了个简单的GUI工具<code>gitk</code>。
在Mac下可以使用<code>SourceTree</code>（在app store）可以免费下载。
Windows下可以使用github提供的客户端，既有图形界面，又有命令行。</p>

<h3>获得帮助</h3>

<p><code>git</code>提供了help来获得帮助信息。</p>

<pre>
$ git help
usage: git [--version] [--exec-path[=<path>]] [--html-path] [--man-path] [--info-path]
           [-p|--paginate|--no-pager] [--no-replace-objects] [--bare]
           [--git-dir=<path>] [--work-tree=<path>] [--namespace=<name>]
           [-c name=value] [--help]
           <command> [<args>]

The most commonly used git commands are:
   add        Add file contents to the index
   bisect     Find by binary search the change that introduced a bug
   branch     List, create, or delete branches
   checkout   Checkout a branch or paths to the working tree
   clone      Clone a repository into a new directory
   commit     Record changes to the repository
   diff       Show changes between commits, commit and working tree, etc
   fetch      Download objects and refs from another repository
   grep       Print lines matching a pattern
   init       Create an empty git repository or reinitialize an existing one
   log        Show commit logs
   merge      Join two or more development histories together
   mv         Move or rename a file, a directory, or a symlink
   pull       Fetch from and merge with another repository or a local branch
   push       Update remote refs along with associated objects
   rebase     Forward-port local commits to the updated upstream head
   reset      Reset current HEAD to the specified state
   rm         Remove files from the working tree and from the index
   show       Show various types of objects
   status     Show the working tree status
   tag        Create, list, delete or verify a tag object signed with GPG

See 'git help <command>' for more information on a specific command.
</pre>


<p>比如要想得到关于commit命令的帮助信息，可以使用</p>

<pre><code>git help commit
</code></pre>

<h3>设置你的个人信息</h3>

<p>在你每次提交时会记录你的用户名和邮箱，可以使用如下命令进行设置。</p>

<pre><code>$ git config --global user.name "Your Name Comes Here"
$ git config --global user.email you@yourdomain.example.com
</code></pre>

<h3>创建一个新的git仓库</h3>

<pre><code>$ mkdir /path/to/your/project
$ cd /path/to/your/project
$ git init
$ git add .
$ git commit -m "First commit"
</code></pre>

<p><code>git init</code>会初始化一个<code>git</code>仓库，初始化后在当前目录会创建一个<code>.git</code>目录。</p>

<p><code>git add .</code>把当前目录和其子目录的文件加入版本控制系统，但是这个时候还没有真正的提交到仓库。</p>

<p><code>git commit</code>把<code>git add</code>产生的改动提交到仓库，<code>-m</code>参数提交的注释信息。</p>

<h3>提交修改过的文件</h3>

<p>使用<code>status</code>命令来查看有哪些文件修改过/新添加：</p>

<pre><code>$ git status
</code></pre>

<p>添加修改过的文件：</p>

<pre><code>$ git add file1 file2 …
</code></pre>

<p>显示修改过的文件的改动（只对使用<code>add</code>命令添加过的文件产生diff）：</p>

<pre><code>$ git diff --cached
</code></pre>

<p>显示修改过的文件的改动（对没有使用<code>add</code>命令添加过的文件产生diff）：</p>

<pre><code>$ git diff
</code></pre>

<p>提交修改到仓库：</p>

<pre><code>$ git commit -m "comments here..."
</code></pre>

<p>如果提交后发现写的comment不是很准确，想要修改刚刚提交的comment，可以使用下面的命令：</p>

<pre><code>$ git commit --amend -m "new comments for last commit here..."
</code></pre>

<p>有时候你只想把某个时间点之后的所有改动都回滚掉，因为这些的改动是不正确的。
可以使用：</p>

<pre><code>$ git log
</code></pre>

<p>显示最近提交列表，以及他们的SHA1哈希值。然后通过<code>reset</code>命令来把修改抹掉：</p>

<pre><code>$ git reset --hard SHA1_HASH
</code></pre>

<p>这样会恢复到一个指定的提交状态，并从记录里永久抹掉所有比该记录更新的提交。</p>

<p>另一些时候你想简单地跳到一个旧状态。这种情况，键入：</p>

<pre><code>$ git checkout SHA1_HASH
</code></pre>

<p>这个操作将把你带回过去的某个版本。</p>

<p>如果要想要某些文件不受<code>git</code>管理，比如编译产生的中间文件。
可以在项目的根目录下创建一个文件<code>.gitignore</code>来过滤这些文件。</p>

<p>我的<code>.gitignore</code>如下</p>

<pre><code>.DS_Store
.DS_Store?
._*
.Spotlight-V100
.Trashes
Icon?
ehthumbs.db
Thumbs.db

#
# xcode user settings
#
xcuserdata
</code></pre>

<p>更多的<code>.gitignore</code>可以参考<a href="https://github.com/github/gitignore">这里</a></p>

<p><code>.gitignore</code>是针对一个项目的，也可以通过设置<code>git</code>全局的配置来指定在所有的项目中都要忽略的文件。
比如你一个全局的配置文件<code>~/.gitignore_global</code>，使用下面的命令可以来指定：</p>

<pre><code>git config --global core.excludesfile ~/.gitignore_global
</code></pre>

<h3>修订历史</h3>

<p>要查看提交的历史记录，使用<code>log</code>命令：</p>

<pre><code>$ git log
commit c82a22c39cbc32576f64f5c6b3f24b99ea8149c7
Author: Junio C Hamano &lt;junkio@cox.net&gt;
Date:   Tue May 16 17:18:22 2006 -0700

    merge-base: Clarify the comments on post processing.
</code></pre>

<p>要查看每次提交到底有哪些改动，加<code>-p</code>参数：</p>

<pre><code>$ git log -p
</code></pre>

<p><code>-p</code>输出非常详细，如果只想查看每次提交包含了哪些文件的改动，使用命令：</p>

<pre><code>$ git log --stat --summary
</code></pre>

<p>如果要查看某次提交具体做了哪些修改，使用<code>git show</code>命令：</p>

<pre><code>$ git show c82a22c39cbc32576f64f5c6b3f24b99ea8149c7
</code></pre>

<p>c82a22c39cbc32576f64f5c6b3f24b99ea8149c7是某次提交的hash值。
在使用<code>show</code>命令是不用每次都完整的输入，只需要输入前面的几个字符能唯一标识一次提交即可：</p>

<pre><code>$ git show c82a22c39c   # the first few characters of the name are
                        # usually enough
$ git show HEAD         # the tip of the current branch
$ git show experimental # the tip of the "experimental" branch
</code></pre>

<p>如果要想使用图形界面查看，使用<code>gitk</code>：</p>

<pre><code>$ gitk
</code></pre>

<p>也可以使用网页形式来查看历史记录：</p>

<pre><code>$ git instaweb
</code></pre>

<p><code>instaweb</code>命令需要一个web服务器，如果是MAC，可以使用<code>brew</code>来安装一个<code>lighttpd</code></p>

<pre><code>$ brew install lighttpd
</code></pre>

<h3>分支管理</h3>

<p><code>git</code>支持在一个仓库中维护多个分支的功能。创建分支是非常轻量级的操作。
使用下面的命令创建一个名为“experimental”的分支：</p>

<pre><code>$ git branch experimental
</code></pre>

<p>使用<code>branch</code>命令来列出所有的分支：</p>

<pre><code>$ git branch
  experimental
* master
</code></pre>

<p>“experimental”分支是刚刚创建的分支，“master”分支是由系统自动创建的缺省分支。
星号（*）表示当前你当前工作在哪个分支上。</p>

<p>要在分支之间切换，使用<code>checkout</code>命令。下面的命令切换到“experimental”分支上：</p>

<pre><code>$ git checkout experimental
</code></pre>

<p>现在修改一些文件，然后在切换回“master”分支：</p>

<pre><code>(edit file)
$ git commit -a
$ git checkout master
</code></pre>

<p>然后在“master”分支上在做一些修改并提交：</p>

<pre><code>(edit file)
$ git commit -a
</code></pre>

<p>要合并“experimental”分支的修改到“master”分支，使用下面的命令：</p>

<pre><code>$ git merge experimental
</code></pre>

<p>如果没有冲突，合并会自动完成，如果有冲突，需要手动解决冲突。
使用<code>diff</code>命令来查看有<code>merge</code>有改动了哪些文件。</p>

<pre><code>$ git diff
</code></pre>

<p>在解决了冲突之后使用<code>commit</code>命令提交修改:</p>

<pre><code>$ git commit -a -m "commit on master…"
</code></pre>

<p>在分支上的修改都合并到之后并不在使用该分支时，可以使用<code>git branch -d</code>来删除该分支：</p>

<pre><code>$ git branch -d experimental
</code></pre>

<p>该命令会确保分支上的修改已经合并到“master”分支。</p>

<p>如果要强制删除一个分支，可以使用<code>git branch -D</code>来完成：</p>

<pre><code>$ git branch -D crazy-idea
</code></pre>

<p>该命令不会检查分支的合并状态，在分支上的修改会丢失。</p>

<p>如果要把一个分支push到远程仓库，比如把mybranch分支push到远程仓库：</p>

<pre><code>$ git checkout mybranch
$ git push origin mybranch
</code></pre>

<p>如果mybranch分支开发完成了，并且已经merge到master了，需要删除远程的分支，
使用下面的命令，它不会删除本地的分支，需要再自己删除本地分支：</p>

<pre><code>$ git push origin :mybranch
$ git branch -d mybranch
</code></pre>

<h3>tag管理</h3>

<p>创建一个tag。
使用-a参数来创建一个tag，-m参数可以指定tag的注释信息。</p>

<pre><code>$ git tag -a v1.0 -m "version 1.0"
</code></pre>

<p>删除一个tag：</p>

<pre><code>$ git tag –d &lt;tagname&gt;
</code></pre>

<p>列出所有的tag</p>

<pre><code>$ git tag
v1.0
</code></pre>

<p>查看一个tag的详细信息</p>

<pre><code>$ git show v1.0
</code></pre>

<p>默认情况下<code>git push</code>是不会把<code>tag</code>信息push到远程的repo，如果需要把tag信息push到远程repo。需要使用<code>--tags</code>参数：</p>

<pre><code>$ git push --tags
</code></pre>

<h3>和远程仓库同步</h3>

<p>从远程仓库clone：</p>

<pre><code>$ git clone https://foo@bitbucket.org/foo/sandbox.git
</code></pre>

<p>把本地仓库同步到远程仓库上去：</p>

<pre><code>$ cd /path/to/my/repo
$ git remote add origin https://foo@bitbucket.org/foo/sandbox.git
$ git push -u origin master   # to push changes for the first time
</code></pre>

<h3>协作</h3>

<p>在<code>github</code>上如果对每个<code>repo</code>感兴趣，想提交代码的话，可以先在本地修改，然后通过<code>pull</code>请求把修改发送给对方。
具体操作方法如下：</p>

<ol>
<li>clone你感兴趣的<code>repo</code>到你自己的账号下。</li>
<li>在你的clone的<code>repo</code>修改代码并提交（可以在线修改并提交，如果代码改动小的比较合适。<code>github</code>太赞了）。</li>
<li>创建pull request。</li>
<li>发送pull request。</li>
</ol>


<p>操作细节参考：<a href="http://three20.info/article/2010-10-15-Editing-A-GitHub-Article">http://three20.info/article/2010-10-15-Editing-A-GitHub-Article</a>。</p>

<h2>git的竞争对手</h2>

<ul>
<li><a href="http://mercurial.selenic.com/">mercurial</a>是另一个分布式的版本控制系统。</li>
</ul>


<h2>参考</h2>

<ul>
<li><a href="http://www.kernel.org/pub/software/scm/git/docs/user-manual.html">git用户手册</a></li>
<li><a href="http://www.kernel.org/pub/software/scm/git/docs/">git命令行参考手册</a></li>
<li><a href="http://www.kernel.org/pub/software/scm/git/docs/gittutorial.html">git入门教程</a></li>
<li><a href="http://www.kernel.org/pub/software/scm/git/docs/everyday.html">git常用命令</a></li>
<li><a href="http://www.kernel.org/pub/software/scm/git/docs/gitworkflows.html">gitworkflows - An overview of recommended workflows with git</a></li>
<li><a href="http://three20.info/article/2010-10-15-Editing-A-GitHub-Article">怎样使用github的协作功能</a></li>
<li><a href="http://code.google.com/p/support/wiki/DVCSAnalysis">Analysis of Git and Mercurial</a></li>
<li><a href="http://git-scm.com/book/en/Git-Basics-Tagging">Git Basic - Tagging</a></li>
<li><a href="http://gitready.com/beginner/2009/02/02/push-and-delete-branches.html">push and delete remote branches</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/06/22/html5-resources/">学习一点HTML5</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-06-22T22:13:00+08:00" pubdate data-updated="true">Jun 22<span>nd</span>, 2012</time>
        
         | <a href="/blog/2012/06/22/html5-resources/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>HTML5是什么</h2>

<blockquote><p>HTML is the publishing language of the World Wide Web.</p></blockquote>


<p>HTML5时下比较时髦，Adobe在移动终端上放弃了Flash而转投HTML5。
微软虽然有自家的Sliverlight，但是还是高调的支持HTML5。
那HTML5到底有些什么东西呢？</p>

<p>其实HTML5不是一个单独的标准，而是一系列的标准的合集。
最主要的新特性包括：</p>

<ul>
<li>Canvas</li>
<li>Video</li>
<li>Audio</li>
<li>SVG的支持</li>
</ul>


<h2>What&#8217;s new in HTML5</h2>

<p>HTML5有哪些新东西呢？</p>

<h3>doctype和charset</h3>

<p>HTML5的doctype声明只有一种，即html。不是html5哦。</p>

<pre><code>&lt;!doctype html&gt;
</code></pre>

<p>要声明文档的字符编码方式也很简单，使用charset即可。</p>

<pre><code>&lt;meta charset="UTF-8"&gt;
</code></pre>

<h3>新增的支持文档结构化的标签</h3>

<p>为了更好的定义页面的布局，HTML5引入了一下新的标签用来支持页面的布局。</p>

<ul>
<li>&lt;section&gt; - to define sections of pages</li>
<li>header - defines the header of a page</li>
<li>footer - defines the footer of a page</li>
<li>nav - defines the navigation on a page</li>
<li>article - defines the article or primary content on a page</li>
<li>aside - defines extra content like a sidebar on a page</li>
<li>figure - defines images that annotate an article</li>
</ul>


<h3>新增支持内联的标签</h3>

<p>为了更好的表达语义和基本感念，新增了如下标签：</p>

<ul>
<li>mark - to indicate content that is marked in some fashion</li>
<li>time - to indicate content that is a time or date</li>
<li>meter - to indicate content that is a fraction of a known range - such as disk usage</li>
<li>progress - to indicate the progress of a task towards completion</li>
</ul>


<h3>对动态页面的支持</h3>

<ul>
<li>Context menus - HTML 5 will support the creation and use of context menus within Web pages and applications</li>
<li>href is not required on a tag - this allows you to use the a tag with scripts and in Web applications without needing a place to send that anchor</li>
<li>async attribute - This is added to the script tag to tell the browser that the script should be loaded asynchronously so that it doesn&#8217;t slow down the load and display of the rest of the page.</li>
<li>&lt;details&gt; - provides details about an element. This would be like tooltips in non-Web applications.</li>
<li>&lt;datagrid&gt; - creates a table that is built from a database or other dynamic source</li>
<li>&lt;menu&gt; - an old tag brought back and given new life allowing you to create a menu system on your Web pages</li>
<li>&lt;command&gt; - defines actions that should happen when a dynamic element is activated</li>
</ul>


<h3>对表单的增强</h3>

<p>为了更明确的表达表单的元素类型，HTML5新增了如下的表单元素类型：</p>

<ul>
<li>datetime</li>
<li>datetime-local</li>
<li>date</li>
<li>month</li>
<li>week</li>
<li>time</li>
<li>number</li>
<li>range</li>
<li>email</li>
<li>url</li>
</ul>


<h3>新增的支持多媒体的标签</h3>

<p>以下三个标签是新增标签中最吸引人的。有了它们你可以在浏览器里自由的画画和直接播放音频和视频。
它们是Flash的杀手。</p>

<ul>
<li>&lt;canvas&gt; - an element to give you a drawing space in JavaScript on your Web pages. It can let you add images or graphs to tool tips or just create dyanmic graphs on your Web pages, built on the fly.</li>
<li>&lt;video&gt; - add video to your Web pages with this simple tag.</li>
<li>&lt;audio&gt; - add sound to your Web pages with this simple tag.</li>
</ul>


<h3>不再支持的标签</h3>

<p>HTML5不再支持HTML4里支持的一下标签，如下</p>

<ul>
<li>acronym</li>
<li>applet</li>
<li>basefont</li>
<li>big</li>
<li>center</li>
<li>dir</li>
<li>font</li>
<li>frame</li>
<li>frameset</li>
<li>isindex</li>
<li>noframes</li>
<li>noscript</li>
<li>s</li>
<li>strike</li>
<li>tt</li>
<li>u</li>
</ul>


<p>不用意外，其中的大部分标签很早就被标记为不推荐使用的了。</p>

<h2>浏览器对HTML5的支持程度</h2>

<p>要看看你的当前使用的浏览器到底对HTML5的支持程度如何，可以访问
<a href="http://html5test.com/">html5test</a>
这个网站，它会给你的浏览器打个分，并标注你的浏览器支持哪些HTML5的特性。
<a href="http://html5test.com/">试试吧</a>。</p>

<p>各大浏览器厂商对HTML5支持的对比测试：
<a href="http://html5test.com/compare/browser/chrome19/ff13/ie09.html">Chrome19 vs. Firefox 13 vs. IE9</a></p>

<h2>HTML5的Logo</h2>

<p>连W3C也赶时髦而制作了一系列的HTML5的logo</p>

<p><img src="/images/html5-resources/HTML5_Logo_256.png" title="HTML5 Logo" alt="picture alt" /></p>

<h2>HTML5相关资源</h2>

<ul>
<li><a href="http://www.w3schools.com/html5/">w3schools的HTML5教程</a></li>
<li><a href="http://www.ibm.com/developerworks/cn/web/wa-html5fundamentals/index.html">IBM Developerworks上的HTML5教程</a></li>
<li><a href="http://www.w3.org/TR/html5/">W3C的HTML5标准（草案）</a></li>
<li><a href="http://dev.w3.org/html5/html4-differences/">HTML5 differences from HTML4</a></li>
<li><a href="http://webdesign.about.com/od/html5/a/html_5_whats_new.htm">What&#8217;s New in HTML5</a></li>
<li><a href="http://www.w3.org/html/logo/">HTML5图标</a>: 各种样式和大小的HTML5的图标。</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/01/16/windows-phone-debug-message-output/">WP7中写调试消息</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-16T21:55:00+08:00" pubdate data-updated="true">Jan 16<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/01/16/windows-phone-debug-message-output/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>在WP7中写调试消息</p>

<pre><code>    System.Diagnostics.Debug.WriteLine("Debug message here...");
</code></pre>

<p>说明:</p>

<ol>
<li>这个只有在调试版本才有效。</li>
<li>在VS2010的Output窗口可以看到输出。</li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/01/13/install-wp7-sdk-on-xp/">在XP下安装WP7的SDK</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-13T22:12:00+08:00" pubdate data-updated="true">Jan 13<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/01/13/install-wp7-sdk-on-xp/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><ol>
<li><p>下载 WP7 SDK 的安装文件: <code>vm_web.exe</code></p></li>
<li><p>解压缩安装包：</p>

<pre><code> vm_web.exe /x
</code></pre></li>
<li><p>到解压缩的目录中修改安装配置，要修改的文件为<code>baseline.dat</code></p>

<p> 找到 gencomp7788 配置，并修改如下配置：</p>

<pre><code> InstallOnLHS=0
 InstallOnWinXP=0
</code></pre></li>
<li><p>运行安装</p>

<pre><code> setup.exe /web
</code></pre></li>
</ol>


<p>参考:</p>

<ul>
<li><a href="http://www.redfrogfish.com/483/how-to-install-windows-phone-7-developer-tools-on-windows-xp/">http://www.redfrogfish.com/483/how-to-install-windows-phone-7-developer-tools-on-windows-xp/</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/01/02/how-to-use-wp7-as-usb-drive/">How to Use WP7 as USB Drive</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-02T21:21:00+08:00" pubdate data-updated="true">Jan 2<span>nd</span>, 2012</time>
        
         | <a href="/blog/2012/01/02/how-to-use-wp7-as-usb-drive/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>How to use WP7 as usb drive ?</p>

<p>If your like me and like to save things on your phone then this is for you. I found it yesterday and it works fine I now have all my stuff on my HD7.</p>

<p>Open Windows Registry Editor by typing regedit in your start menu
- Go to HKEY_LOCAL_MACHINE\SYSTEM\
- Then go to HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Enum\U SB (and not the other ControlSet01 or 02 if you have them) and then search for ZuneDriver</p>

<ul>
<li>Change ShowInShell from 0 to 1 &lt;- this enable Windows Explorer to show the device when pluged in</li>
<li>Change PortableDeviceNameSpaceExcludeFromShell from 1 to 0</li>
<li>Change EnableLegacySupport from 0 to 1 &lt;- this enables Windows Explorer to detect the device</li>
<li>You can also change EnableDefaultAutoPlaySupport but it didn’t seem to do anything.</li>
</ul>


<p>Once its done just plug-in your device to your PC. The Zune software will automatically launch as usual and your device will also appear in the Windows explorer</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/12/29/web-developer-tools-bookmark/">网站开发书签</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-12-29T20:32:00+08:00" pubdate data-updated="true">Dec 29<span>th</span>, 2011</time>
        
         | <a href="/blog/2011/12/29/web-developer-tools-bookmark/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><ul>
<li>一个在线调试和共享js代码的网站：<a href="http://jsfiddle.net">http://jsfiddle.net</a></li>
<li>Email icon generator：<a href="http://services.nexodyne.com/email/index.php">http://services.nexodyne.com/email/index.php</a></li>
<li>在线把网页转换为pdf：<a href="http://www.printfriendly.com/">http://www.printfriendly.com/</a></li>
<li>Web模板下载：<a href="http://960.gs/">http://960.gs/</a></li>
<li>Mobile mockup <a href="https://www.fluidui.com/">https://www.fluidui.com/</a></li>
<li>Axure</li>
<li>Angularjs <a href="http://angularjs.org">http://angularjs.org</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/12/28/jquery-revert-selection/">jQuery Reverse Selection</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-12-28T22:12:00+08:00" pubdate data-updated="true">Dec 28<span>th</span>, 2011</time>
        
         | <a href="/blog/2011/12/28/jquery-revert-selection/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>TODO&#8230;</p>

<script>
(function($) {
  $.fn.reverse = function () 
  {
      var orig = this.prevObject;
      return orig.not(this) || jQuery(null);
  }
})(jQuery);

$('li').css('background-color','gray')
    .filter(':contains("sub")')
    .css('color','yellow')
    .reverse()
    .css('color','red');
</script>




<ul>
  <li>sub 1</li>
  <li>inv 1</li>
  <li>sub 2</li>
  <li>inv 2</li>
</ul>




<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">reverse</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">orig</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">prevObject</span><span class="p">;</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">orig</span><span class="p">.</span><span class="nx">not</span><span class="p">(</span><span class="k">this</span><span class="p">)</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">})(</span><span class="nx">jQuery</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;li&#39;</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;background-color&#39;</span><span class="p">,</span><span class="s1">&#39;gray&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;:contains(&quot;sub&quot;)&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="p">.</span><span class="nx">reverse</span><span class="p">()</span>
</span><span class='line'>    <span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span><span class="s1">&#39;red&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>参考</p>

<ul>
<li><a href="http://stackoverflow.com/questions/4502533/jquery-method-to-select-a-subset-and-also-its-inverse">http://stackoverflow.com/questions/4502533/jquery-method-to-select-a-subset-and-also-its-inverse</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/12/24/jquery-tree-filter/">实现jQuery的treeview的filter</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-12-24T21:21:00+08:00" pubdate data-updated="true">Dec 24<span>th</span>, 2011</time>
        
         | <a href="/blog/2011/12/24/jquery-tree-filter/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>使用jQuery的treeview插件做了一个tree，遇到一个tree特别长的问题，
需要做一下filter，方便查找。</p>

<p>做tree的filter可以这样实现：</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#filter&quot;</span><span class="p">).</span><span class="nx">change</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">tval</span><span class="o">=</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;li&quot;</span><span class="p">).</span><span class="nx">hide</span><span class="p">()</span>
</span><span class='line'>         <span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s2">&quot;:contains(&#39;&quot;</span><span class="o">+</span><span class="nx">tval</span><span class="o">+</span><span class="s2">&quot;&#39;)&quot;</span><span class="p">)</span>
</span><span class='line'>         <span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;li&#39;</span><span class="p">)</span>
</span><span class='line'>         <span class="p">.</span><span class="nx">andSelf</span><span class="p">()</span>
</span><span class='line'>         <span class="p">.</span><span class="nx">show</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">all</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;li span.file&quot;</span><span class="p">,</span> <span class="nx">tree</span><span class="p">).</span><span class="nx">parent</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">selects</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;li span.file a&quot;</span><span class="p">,</span> <span class="nx">tree</span><span class="p">)</span>
</span><span class='line'>                 <span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s2">&quot;:contains(&#39;&quot;</span> <span class="o">+</span> <span class="nx">filter</span> <span class="o">+</span> <span class="s2">&quot;&#39;)&quot;</span><span class="p">)</span>
</span><span class='line'>                 <span class="p">.</span><span class="nx">parent</span><span class="p">()</span>
</span><span class='line'>                 <span class="p">.</span><span class="nx">parent</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">all</span><span class="p">.</span><span class="nx">not</span><span class="p">(</span><span class="nx">selects</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>参考</p>

<ul>
<li><a href="http://stackoverflow.com/questions/3691201/jquery-how-hide-show-tree-elements-based-on-search-criteria">http://stackoverflow.com/questions/3691201/jquery-how-hide-show-tree-elements-based-on-search-criteria</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/12/22/linux-reset-terminal/">在Linux下清屏是clear还是reset</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-12-22T19:21:00+08:00" pubdate data-updated="true">Dec 22<span>nd</span>, 2011</time>
        
         | <a href="/blog/2011/12/22/linux-reset-terminal/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>在终端中<code>Ctrl+L</code>或者<code>clear</code>会重绘屏幕。
它能清除由系统广播消息导致的屏幕混乱情况。
但如果是由于屏幕上打印了一些控制字符引起的屏幕混乱，
<code>Ctrl+L</code>就没有效果了，这个时候需要使用<code>reset</code>命令。</p>

<blockquote><p>There is garbage on the screen, or all your keystrokes are echoed as line drawing characters. What to do?</p><p>Many programs will redraw the screen when `Ctrl-L` is typed. This might help when there is some modem noise or broadcast<br/>message on your screen. The command `clear` will clear the screen.</p><p>The command `reset` will reset the console driver. This helps when the screen is full of funny graphic characters, and<br/>also if it is reduced to the bottom line.</p><footer><strong>Resetting your terminal</strong> <cite><a href='http://tldp.org/HOWTO/Keyboard-and-Console-HOWTO-4.html'>Linux Howto</a></cite></footer></blockquote>



</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/05/02/android-hack-tools/">Android APK解析及反编译</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/03/02/using-sphinx-to-generate-chinese-pdf/">在Mac上使用Sphinx产生文档并生成中文PDF文档</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/04/android-library-jar/">Android的Library工程</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/12/12/centos-tips/">CentOS Tips</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/18/android-hardware-accel/">Android的硬件加速及可能导致的问题</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/25/python-tips/">Python Tips</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/21/protobuf-ios/">在iOS上使用protobuf</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/15/learn-octave/">学习一点octave</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/08/python-pip-virtualenv/">Python的virtualenv和pip</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/04/android-sparsearray/">Android上使用SparseArray来替代HashMap</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Tag Cloud</h1>
    <span id="tag-cloud"><a href='/blog/categories/ace' style='font-size: 108.57142857142857%'>ace(2)</a> <a href='/blog/categories/agile' style='font-size: 104.28571428571429%'>agile(1)</a> <a href='/blog/categories/ai' style='font-size: 104.28571428571429%'>ai(1)</a> <a href='/blog/categories/algorithm' style='font-size: 112.85714285714286%'>algorithm(3)</a> <a href='/blog/categories/android' style='font-size: 117.14285714285714%'>android(4)</a> <a href='/blog/categories/apt' style='font-size: 104.28571428571429%'>apt(1)</a> <a href='/blog/categories/centos' style='font-size: 104.28571428571429%'>centos(1)</a> <a href='/blog/categories/debian' style='font-size: 104.28571428571429%'>debian(1)</a> <a href='/blog/categories/debug' style='font-size: 117.14285714285714%'>debug(4)</a> <a href='/blog/categories/django' style='font-size: 108.57142857142857%'>django(2)</a> <a href='/blog/categories/drbd' style='font-size: 104.28571428571429%'>drbd(1)</a> <a href='/blog/categories/gdb' style='font-size: 104.28571428571429%'>gdb(1)</a> <a href='/blog/categories/git' style='font-size: 104.28571428571429%'>git(1)</a> <a href='/blog/categories/howto' style='font-size: 112.85714285714286%'>howto(3)</a> <a href='/blog/categories/hp-ux' style='font-size: 104.28571428571429%'>hp-ux(1)</a> <a href='/blog/categories/html5' style='font-size: 104.28571428571429%'>html5(1)</a> <a href='/blog/categories/http' style='font-size: 104.28571428571429%'>http(1)</a> <a href='/blog/categories/ios' style='font-size: 104.28571428571429%'>ios(1)</a> <a href='/blog/categories/javascript' style='font-size: 112.85714285714286%'>javascript(3)</a> <a href='/blog/categories/jquery' style='font-size: 108.57142857142857%'>jquery(2)</a> <a href='/blog/categories/kernel' style='font-size: 125.71428571428572%'>kernel(6)</a> <a href='/blog/categories/linux' style='font-size: 160.0%'>linux(14)</a> <a href='/blog/categories/linux' style='font-size: 104.28571428571429%'>Linux(1)</a> <a href='/blog/categories/nettl' style='font-size: 104.28571428571429%'>nettl(1)</a> <a href='/blog/categories/ntp' style='font-size: 104.28571428571429%'>ntp(1)</a> <a href='/blog/categories/octave' style='font-size: 108.57142857142857%'>octave(2)</a> <a href='/blog/categories/pip' style='font-size: 104.28571428571429%'>pip(1)</a> <a href='/blog/categories/protobuf' style='font-size: 104.28571428571429%'>protobuf(1)</a> <a href='/blog/categories/putty' style='font-size: 104.28571428571429%'>putty(1)</a> <a href='/blog/categories/python' style='font-size: 117.14285714285714%'>python(4)</a> <a href='/blog/categories/scrum' style='font-size: 104.28571428571429%'>scrum(1)</a> <a href='/blog/categories/secure' style='font-size: 104.28571428571429%'>secure(1)</a> <a href='/blog/categories/shell' style='font-size: 104.28571428571429%'>shell(1)</a> <a href='/blog/categories/sphinx' style='font-size: 104.28571428571429%'>sphinx(1)</a> <a href='/blog/categories/tips' style='font-size: 104.28571428571429%'>tips(1)</a> <a href='/blog/categories/virtualenv' style='font-size: 104.28571428571429%'>virtualenv(1)</a> <a href='/blog/categories/web' style='font-size: 108.57142857142857%'>web(2)</a> <a href='/blog/categories/windbg' style='font-size: 104.28571428571429%'>windbg(1)</a> <a href='/blog/categories/wp7' style='font-size: 112.85714285714286%'>wp7(3)</a> </span>
</section>

<section>
  <h1>新浪微博</h1>
  <ul id="weibo">
    <li>
      <iframe 
        width="100%" 
        height="550" 
        class="share_self" 
        frameborder="0" 
        scrolling="no" 
        src="http://widget.weibo.com/weiboshow/index.php?width=0&height=550&ptype=1&speed=0&skin=&isTitle=0&noborder=1&isWeibo=1&isFans=&uid=2036163762&verifier=bce5fd03">
      </iframe>
    </li>
  </ul>
</section>







  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Ming -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'chenming';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
